<script>
const input = document.getElementById("input");
const messages = document.getElementById("messages");

// Add your OpenAI API key here
const OPENAI_API_KEY = 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; // ðŸ”¥ REPLACE THIS

function addMessage(text, className) {
  const msg = document.createElement("div");
  msg.className = className;
  msg.textContent = text;
  messages.appendChild(msg);
  messages.scrollTop = messages.scrollHeight;
}

async function getAIResponse(userText) {
  try {
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${OPENAI_API_KEY}`
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [
          { role: "system", content: "You are Tickle Tank AI, a Y2K skater chatbot, loud and chaotic, speaking in teen slang." },
          { role: "user", content: userText }
        ],
        max_tokens: 150
      })
    });
    const data = await res.json();
    return data.choices[0].message.content;
  } catch (err) {
    console.error(err);
    return "Oops, something went wrong ðŸ˜­";
  }
}

input.addEventListener("keypress", async function (e) {
  if (e.key === "Enter" && input.value.trim() !== "") {
    const text = input.value;
    addMessage("You: " + text, "user");
    addMessage("Tickle Tank AI: processingâ€¦ ðŸ‘€", "bot");
    
    const response = await getAIResponse(text);
    
    // Replace last "processing..." with real answer
    messages.lastChild.textContent = "Tickle Tank AI: " + response;
    input.value = "";
  }
});
</script>

